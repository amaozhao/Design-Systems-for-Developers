# 4 - 引入样式字典

之前，我们已经讨论过在多个应用程序（及其各自的平台和技术）中用代码表示设计规范的问题。 例如，如果有多个 CSS 和 JavaScript 文件在代码中维护它们自己的设计规范表示，那么就很难使它们全部与最新的官方设计规范保持同步。 此外，没有可以作为"事实来源"的中心位置，阻止你将公司内所有应用程序实现的样式与官方设计规范进行比较。

那么，我们如何解决这个问题呢？

我们可以通过在一个地方用代码表示设计规范来解决这个问题。 换句话说，我们有一个单独的地方来存储我们的设计令牌，我们的设计规范的平台和技术不可知标签以代码表示。 通过一些工具，我们可以生成封装设计规范的平台可交付成果，如 CSS、SASS 或 JavaScript 变量，并将它们交付给所有采用该设计系统的应用程序。 换句话说，我们可以构建或生成所有使用设计系统的应用程序所需的资产。 然后，我们可以根据给定目标平台和技术的偏好，将其中一些资产交付给每个消费应用程序。 由于 ZapShoes 的 React 和 Vue 应用程序希望将他们的设计规范封装在一个共享的 CSS-in-JS 库中，我们可以将设计标记转换并作为 JavaScript 变量发送。 纯 HTML 编码人员可以根据自己的需要构建并发送给他们的 CSS 文件。

那么，为什么这很重要？

首先，使使用设计系统的所有应用程序与设计系统的最新官方规范保持同步变得非常容易。 原因是，你只有一个地方可以保持同步。 不是所有的消费应用程序都维护自己的设计令牌集，而是将维护工作移至一个位置。

其次，由于只有一个地方可以存储设计令牌，设计人员和开发人员只需扫一眼这个中心位置就可以确定在公司内的所有应用程序中实施（或未实施）的设计规范。 你不再需要检查每个共享库和/或消费应用程序中的所有 CSS 和/或 JavaScript 文件来确定是否与官方设计规范同步。

最后，从平台和技术不可知的设计令牌构建平台和技术特定的可交付成果允许设计系统在公司内很好地扩展。 即使添加了更多应用程序和/或某些应用程序以新平台和技术堆栈为目标，你也只需交付正在构建的平台可交付成果或配置要构建和交付的新平台可交付成果。 这么说吧，由于你从最不可知的设计规范表示开始，即你的设计标记，你可以根据需要生成更多特定于平台和技术的可交付成果。 通过这样做，你可以避免对设计规范进行平台和技术特定封装（如 CSS-in-JS 库中的文件）以及在支持新平台和技术时不得不向后工作的问题。 你不必局限于最不可知的资产来封装你的设计规范（如 CSS 文件）或在没有单一真实来源的情况下支持广泛的资产。

正如我们在代码（设计令牌）中为你的设计规范的平台和技术不可知的表示提供了一个标签，我们为存储我们的设计令牌、构建平台可交付成果并将这些可交付成果发送给消费者的单一位置提供了一个标签 应用程序。 我们可以称它为风格字典。 描述样式字典的另一种方式是作为设计标记的中央管理系统。 它是设计令牌的中央管理系统，因为它是设计规范编码实现的真实来源。

我喜欢"风格词典"这个术语，因为它同时捕捉了我们试图通过设计令牌的中央管理系统实现的技术和说明性含义。

如果你熟悉 C# 这样的语言，那么你就会理解"字典"的技术意义。 字典是键和值的集合。 类似地，在 JavaScript 中，对象是键和值的集合，或"字典"。 如果你玩过拼字游戏，你就会知道字典是非常有价值的。 字典，用人类的话说，就是一个词的集合，可以确定游戏板上拼字游戏字母的排列是否是一个有效的词。 同样，"字典"意味着样式字典是代表有效设计规范并提供单一真实来源的设计标记的集合的说明性含义。

好的，我们已经以抽象的方式描述了设计标记和样式字典。 让我们来点技术性的。

由于样式字典是存储设计标记的单一位置，因此它可以像文件一样简单。 回想一下，设计令牌是代表代码中设计规范的键值对。 "存储"键值对的一种灵活方式是 JSON 对象。 因此，设计令牌可以"存储"在 JSON 对象中。 对象上的每个属性都有一个代表设计规范名称的键和一个值。 简单样式字典可能只是一个 JSON 文件。

但是，如果希望能够将设计令牌转换为平台可交付成果，我们需要的不仅仅是一个 JSON 文件。 理想情况下，样式字典还将包含将设计标记转换为平台可交付成果的脚本。 例如，你可以使用 Node 脚本来读取 JSON 文件并创建 CSS 变量、JavaScript 模块等。

最后，样式字典将是一个包含所有这些代码的存储库。 通过拥有存储库，你可以邀请设计人员和开发人员进行协作。 使用 GitHub 等工具，设计人员和开发人员可以围绕设计令牌的演变进行版本控制。 换句话说，设计人员可以查看和审查对设计令牌所做的更改。 这样，设计师和开发人员将与代码中的设计系统更新保持同步，而不仅仅是设计文件中的更新。 我们将在本书后面通过样式字典讨论设计人员和开发人员之间的协作。

值得庆幸的是，在创建和维护样式字典时，我们不必重新发明轮子。 已经存在用于将设计令牌存储在 JSON 中并将其转换为通用平台可交付成果的工具。 在 ZapShoes，我们将使用一个名为 Style Dictionary 的库，他们将其描述为：

一个允许你以任何平台或语言使用的方式定义一次样式的系统。 在一个地方创建和编辑你的样式，一个命令将这些规则导出到你需要它们的所有地方 - iOS、Android、CSS、JS、HTML、草图文件、样式文档等。它可以作为 CLI 通过 npm，但如果你想扩展其功能，也可以像任何普通 npm 模块一样使用。

总而言之，我们将创建一个使用 Style Dictionary 包的 npm 包。 它将设计令牌存储在 JSON 中，并包含一个 npm 脚本，该脚本执行 Style Dictionary CLI 以构建平台可交付成果（CSS 变量、JavaScript 模块等）。然后我们将有另一个脚本将平台可交付成果交付给所有应用程序 正在消耗设计系统。 最后，我们将有一个 GitHub 存储库，其中包含用于版本控制和协作的代码。

在开始创建完整的样式字典之前，我们必须学习如何将设计规范从设计文件转换为存储在 JSON 中的设计标记。